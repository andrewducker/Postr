		<div id="pinCredentials" title="Pinboard Details">
			<form>
				<label for=pinUsername>User Name:</label> <input type="text" id="pinUsername" name="username"><BR>
				<button type="button" id="pinCredentialsVerify">Verify</button><BR>
				<div id="pinIdentity"></div><BR>
			</form>
		</div>
		
		<script type="text/javascript">
		
			var Pinboard = function Pinboard(){
				var siteName = "Pinboard";
				var siteID = "pinboard";
				var usernameID = "pinUsername";
				var credentialsWizard = "pinCredentials"
				var identityID = "pinIdentity"; 
				var verifyID = "pinCredentialsVerify";
				
				var that = this;
				
				var saveCredentials = function(){
					if(j(identityID).text() != ""){
						var params = {method:"SaveData", userName:j(usernameID).val()};
						var posting = $.post(siteID,{params:JSON.stringify(params)});
						wizards.registerCallForWizardDisplay(posting).done(function(data){
							data.siteName = siteName;
							data.userName = params.userName;
							that.currentDeferral.resolve(data);
						});
					}
					else{
						wizards.showError("Identity not validated");
					}
				}
			
				var addInput = function(){
					j(identityID).text("");
					j(usernameID).val("");
					var buttons = j(credentialsWizard ).dialog( "option", "buttons", [{text:"ok", click: function(){saveCredentials()}}]);
					that.currentDeferral = $.Deferred();
					wizards.showPage(credentialsWizard);
					return that.currentDeferral;
				}
				
				j(usernameID).change(function(){
					j(identityID).text("");
				})
				
				j(verifyID).click(function(){
					var params = {method:"VerifyUserExists", userName:j(usernameID).val()};
					var posting = $.post(siteID,{params:JSON.stringify(params)});
					posting.done(function(data){
						var parsedData = $.parseJSON(data);
						j(identityID).text("Verified");
						wizards.setProperty(credentialsWizard,"height","auto");
					});
					wizards.registerCallForWizardOnError(posting);
				});
				AddInput(siteName, addInput);
			};
		
			$(function() {
				wizards.register("pinCredentials");
				var pinboard = new Pinboard();
			});
		</script>