<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css">
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script src="wizards.js"></script>
</head>
<body>

<fieldset>
<legend>Inputs</legend>
<label for="AddNewInput1">Add New 1:</label>
<input type="submit" id="AddNewInput1" value="Click here">
</fieldset>

        <div id="dreamwidthCredentials">
            <h1>Enter your Dreamwidth details.</h1>
            <form>
				<input type="text" id="username" name="username">
				<input type="password" id="password" name="password">
				<button type="button" id="dreamwidthCredentialsVerify">Verify</button>
				<div id="dreamwidthIdentity"></div>
 				<input type=text id="timeZoneee">
			</form>
        </div>

        <div id="dreamwidthResults">
            <h1>Check Complete</h1>
            <div id="dreamwidthResultsText"><h2>Did it work?</h2></div>
        </div>

		<script type="text/javascript">

		function verifyDreamwidthCredentials()
		{
			if($("#dreamwidthIdentity").text() != ""){
				var params = {method:"SaveData", username:$("#username").val(), password:$("#password").val(), timeZone:$("timeZone").val()};
				var posting = $.post("dreamwidth",{params:JSON.stringify(params)});
				wizards.registerCallForWizardDisplay(posting,"dreamwidthResultsText","dreamwidthResults");
			}
			else{
				wizards.showError("Identity not validated");
			}
		}

		wizards.register("#dreamwidthCredentials",{buttons: [{text:"ok", click: verifyDreamwidthCredentials}]});
		wizards.register("#dreamwidthResults",{buttons: [{text:"Done", click: wizards.closeAllPages}]});
                        
			$(function() {
				$( "#AddNewInput1" ).click(function() {wizards.showPage($("#dreamwidthCredentials"));
					});
				$("#dreamwidthCredentialsVerify").click(function(){
					var params = {method:"VerifyPassword", username:$("#username").val(), password:$("#password").val()};
					var posting = $.post("dreamwidth",{params:JSON.stringify(params)});
					posting.done(function(data){
						var parsedData = $.parseJSON(data);
						$("#dreamwidthIdentity").text(parsedData.result);
					});
					wizards.registerCallForWizardOnError(posting);
				});
                        })
        </script>
        
</body>

</html>