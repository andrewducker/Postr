<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css">
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
</head>
<body>

<fieldset>
<legend>Inputs</legend>
<label for="AddNewInput1">Add New 1:</label>
<input type="submit" id="AddNewInput1" value="Click here">
<label for="AddNewInput2">Add New 2:</label>
<input type="submit" id="AddNewInput2" value="Click here too">

</fieldset>

        <div id="dreamwidthCredentials">
            <h1>Enter your Dreamwidth user name and password.</h1>
            <form>
				<input type="text" id="username" name="username">
				<input type="password" id="password" name="password">
			</form>
        </div>

        <div id="dreamwidthResults">
            <h1>Other Important message</h1>
            <div id="myDiv"><h2>Did it work?</h2></div>
        </div>

		<script type="text/javascript">

		function VerifyDreamwidthCredentials()
		{
			var posting = $.post("dreamwidth",{username:$("#username").val(), password:$("#password").val()});
			posting.done(function(data){
				$("#myDiv").text(data);
				showWizardPage($("#dreamwidthResults"));
			});
		}

		$( "#dreamwidthCredentials" ).dialog({ autoOpen: false },{modal:true},{buttons: [{text:"ok", click: VerifyDreamwidthCredentials}]});
		$( "#dreamwidthResults" ).dialog({ autoOpen: false },{modal:true},{buttons: [{text:"ok", click: CloseAllPages}]});
                        var wizards = new Array();
                        closingAllPages = false;

                        function showWizardPage(boxToShow){
                        	if(wizards.length > 0){
                        		var currentPage = wizards[wizards.length-1];
                        		currentPage.dialog( "widget" ).hide();
                        	}
                            wizards.push(boxToShow);
                            boxToShow.on( "dialogclose", function( event, ui ) {RewindWizardPage();} );
                            boxToShow.dialog("open");
                        }
                        
                        function RewindWizardPage(){
                        	if(closingAllPages){
                        		return;
                        	}
                            var previousPage = wizards.pop();
                            if (wizards.length == 0) {
                            }
                            else{
                            	var currentPage = wizards[wizards.length-1];
                        		currentPage.dialog( "widget" ).show();
                            }
                        }
                        
                        function CloseAllPages(){
                        	closingAllPages = true;
                        	while(wizards.length > 0){
                            	var currentPage = wizards.pop();
								currentPage.dialog("close");                        		
                        		}
                        	closingAllPages = false;
                        }
                        
                        
                        
			$(function() {
				$( "#AddNewInput1" ).click(function() {
					showWizardPage($("#dreamwidthCredentials"));
					});

                        })

        </script>
</body>

</html>